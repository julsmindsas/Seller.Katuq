<app-breadcrumb [title]="'Adiciones'" [items]="['Catalogo']" [active_item]="'Adiciones'"></app-breadcrumb>

<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <div class="card">
                <i class="icon-bg" width="80" height="80"
                    style="opacity: 0.4;position: absolute; color: #6ec0d4; top: 10px; left: 10px;"></i>
                <div class="loader-box" *ngIf="cargando">
                    <div class="loader-8"></div>
                </div>

                <div class="card-body custom-datatable" *ngIf="!cargando">
                    <div class="row">
                        <div class="col-sm-6">
                            <input type='text' class="form-control" style="width:70% !important"
                                placeholder="{{'Escribe el texto que deseas filtrar' | translate}}"
                                (keyup)='updateFilter($event)' />
                        </div>
                        <div class="col-sm-6 mb-3" style="text-align: end;">

                            <button class="btn btn-primary btn-previous ml-3 mb-2" type="button" (click)="create()">
                                <span style="color: white;">{{'Crear Adición' | translate}}</span> 
                                <i placement="top" ngbTooltip="{{'Nuevo' | translate}}"
                                    style="font-size: 18px; margin-left: 10px; color:white; cursor: pointer;"
                                    class="icofont icofont-plus"></i>
                            </button>
                        </div>

                    </div>
                    <!-- <ngx-datatable #table class='bootstrap' [columns]="columns" [columnMode]="ColumnMode.force"
                        [headerHeight]="50" [footerHeight]="50" rowHeight="auto" [limit]="10" [rows]="rows"
                        [sorts]="[{ prop: 'posicion', dir: 'asc' }]">
                        <ngx-datatable-column name="{{'' | translate}}">
                            <ng-template let-row="row" ngx-datatable-cell-template>
                                <img *ngIf="row.imagenPrincipal.length > 0" src="{{row.imagenPrincipal[0]?.urls}}"
                                    alt="{{ row.titulo }}" width="50" height="50">
                                <img *ngIf="row.imagenPrincipal.length == 0" src="" alt="{{ row.titulo }}" width="100"
                                    height="100">
                            </ng-template>
                        </ngx-datatable-column>
                        <ngx-datatable-column name="{{'Titulo' | translate}}">
                            <ng-template let-row="row" ngx-datatable-cell-template>
                                {{ row.titulo }}
                            </ng-template>
                        </ngx-datatable-column>
                        <ngx-datatable-column name="{{'Descripción' | translate}}">
                            <ng-template let-row="row" ngx-datatable-cell-template>
                                {{ row.descripcion }}
                            </ng-template>
                        </ngx-datatable-column>

                        <ngx-datatable-column name="{{'Activo' | translate}}">
                            <ng-template let-row="row" ngx-datatable-cell-template>
                                {{row.active == true ? 'Si': 'No'}}
                            </ng-template>
                        </ngx-datatable-column>
                        <ngx-datatable-column name="{{'Tiempo Entrega' | translate}}">
                            <ng-template let-row="row" ngx-datatable-cell-template>
                                {{row.tiempoEntrega}}
                            </ng-template>
                        </ngx-datatable-column>
                        <ngx-datatable-column name="{{'Tipo Entrega' | translate}}">
                            <ng-template let-row="row" ngx-datatable-cell-template>
                                {{row.tipoEntrega}}
                            </ng-template>
                        </ngx-datatable-column>
                        <ngx-datatable-column name="{{'Acciones' | translate}}">
                            <ng-template let-row="row" ngx-datatable-cell-template>
                                <i placement="top" ngbTooltip="{{'Edit' | translate}}"
                                    style="font-size: 18px; margin-left: 10px; color: cornflowerblue; cursor: pointer;"
                                    class="icofont icofont-pencil-alt-5" (click)="editar(row)"></i>
                                    <i placement="top" ngbTooltip="{{'Eliminar' | translate}}"
                    style="font-size: 18px; margin-left: 10px; color: cornflowerblue; cursor: pointer;"
                    class="icofont icofont-ui-delete" (click)="deleteAdicion(row)"></i>
                            </ng-template>
                        </ngx-datatable-column> 
                    </ngx-datatable>
                        -->

                        <p-table [value]="rows" [scrollable]="true" scrollHeight="400px" [rows]="10" [paginator]="true" [sortField]="'posicion'" [sortOrder]="1" [responsive]="true">
                            <ng-template pTemplate="header">
                              <tr>
                                <th rowspan="2">
                                  <span>{{ '' | translate }}</span>
                                </th>
                                <th rowspan="2">
                                  <span>{{ 'Titulo' | translate }}</span>
                                </th>
                                <th rowspan="2">
                                    <span>{{ 'Referencia' | translate }}</span>
                                  </th>
                                <th rowspan="2">
                                  <span>{{ 'Descripción' | translate }}</span>
                                </th>
                                <th rowspan="2">
                                  <span>{{ 'Activo' | translate }}</span>
                                </th>
                                <th rowspan="2">
                                  <span>{{ 'Tiempo Entrega' | translate }}</span>
                                </th>
                                <th rowspan="2">
                                  <span>{{ 'Tipo Entrega' | translate }}</span>
                                </th>
                                <th rowspan="2">
                                  <span>{{ 'Acciones' | translate }}</span>
                                </th>
                              </tr>
                            </ng-template>
                            <ng-template pTemplate="body" let-row>
                              <tr>
                                <td>
                                  <img *ngIf="row.imagenPrincipal.length > 0" [src]="row.imagenPrincipal[0]?.urls" [alt]="row.titulo" width="50" height="50">
                                  <img *ngIf="row.imagenPrincipal.length == 0" src="" [alt]="row.titulo" width="100" height="100">
                                </td>
                                <td>{{ row.titulo }}</td>
                                <td>{{ row?.referencia }}</td>
                                <td>{{ row.descripcion }}</td>
                                <td>{{ row.active == true ? 'Si' : 'No' }}</td>
                                <td>{{ row.tiempoEntrega }}</td>
                                <td>{{ row.tipoEntrega }}</td>
                                <td>
                                  <i placement="top" ngbTooltip="{{'Edit' | translate}}" style="font-size: 18px; margin-left: 10px; color: cornflowerblue; cursor: pointer;" class="icofont icofont-pencil-alt-5" (click)="editar(row)"></i>
                                  <i placement="top" ngbTooltip="{{'Eliminar' | translate}}" style="font-size: 18px; margin-left: 10px; color: cornflowerblue; cursor: pointer;" class="icofont icofont-ui-delete" (click)="deleteAdicion(row)"></i>
                                </td>
                              </tr>
                            </ng-template>
                          </p-table>
                          

                    <button class="btn btn-primary" style="color: white;"><i class="icofont icofont-file-excel"></i>Excel</button>
                </div>
            </div>
        </div>
    </div>
</div>