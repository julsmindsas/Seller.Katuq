<!-- <app-breadcrumb [title]="'Clientes'" [items]="['Ventas/Clientes']" [active_item]="'Clientes'"></app-breadcrumb> -->
<div class="container-fluid px-0">
    <br>
    <div class="card customer-card p-2">

        <!-- Cabecera -->
        <div class="text-left m-1" *ngIf="isEdit">
            <i placement="top" ngbTooltip="{{ 'Regresar al listado' | translate }}"
                style="font-size: 24px; color: var(--primary-color); cursor: pointer;"
                class="icofont icofont-arrow-left" [routerLink]="'/ventas/clienteslista'"></i>
        </div>

        <div class="card-header">

            <div class="row align-items-center">
                <div class="col-md-6">
                    <h2 class="text-left fc-secondary fs-24 m-0 p-0">{{ "Clientes" | translate }}</h2>
                    <p class="text-muted mb-0">{{ "Ingresa todos los datos para crear un cliente nuevo" | translate }}
                    </p>
                </div>
                <div class="col-md-6">
                    <div class="search-box">
                        <div class="input-group">
                            <select #buscarPor class="form-select" id="tipo_documento">
                                <option value="CC-NIT" selected>CC-NIT</option>
                                <option value="PA">Email</option>
                                <option value="TI">Nombre Apellido</option>
                            </select>
                            <input #documentoBusqueda class="form-control" type="text" id="numero_documento"
                                placeholder="Buscar cliente...">
                            <button class="btn btn-primary" (click)="buscar()">
                                <i class="fa fa-search"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Formulario principal -->
        <div class="card-body p-3">
            <form [formGroup]="formulario">
                <div class="row g-3">
                    <!-- Sección de información básica -->
                    <div class="col-md-6">
                        <div class="form-section shadow">
                            <h5 class="section-title">Información Básica</h5>
                            <div class="row g-3">
                                <!-- Tipo de Documento -->
                                <div class="col-xl-6 col-lg-12">
                                    <label class="form-label">Tipo Documento</label>
                                    <select style="width: 100%;" class="form-select" [disabled]="isEdit"
                                        formControlName="tipo_documento_comprador">
                                        <option value="" disabled selected>Seleccionar</option>
                                        <option value="CC-NIT">CC-NIT</option>
                                        <option value="PA">PA</option>
                                        <option value="TI">TI</option>
                                    </select>
                                    <div *ngIf="formulario.get('tipo_documento_comprador')?.invalid && formulario.get('tipo_documento_comprador')?.touched"
                                        class="invalid-feedback d-block">
                                        Este campo es obligatorio
                                    </div>
                                </div>

                                <!-- Documento -->
                                <div class="col-xl-6  col-lg-12">
                                    <label class="form-label">Documento</label>
                                    <input placeholder="Número de documento" class="form-control" type="text"
                                        formControlName="documento" [disabled]="isEdit">
                                    <div *ngIf="formulario.get('documento')?.invalid && formulario.get('documento')?.touched"
                                        class="invalid-feedback d-block">
                                        Este campo es obligatorio
                                    </div>
                                </div>

                                <!-- Nombres Completos -->
                                <div class="col-xl-6 col-lg-12">
                                    <label class="form-label">Nombres</label>
                                    <input placeholder="Nombres completos" class="form-control" type="text"
                                        formControlName="nombres_completos">
                                    <div *ngIf="formulario.get('nombres_completos')?.invalid && formulario.get('nombres_completos')?.touched"
                                        class="invalid-feedback d-block">
                                        Este campo es obligatorio
                                    </div>
                                </div>

                                <!-- Apellidos Completos -->
                                <div class="col-xl-6 col-lg-12">
                                    <label class="form-label">Apellidos</label>
                                    <input placeholder="Apellidos completos" class="form-control" type="text"
                                        formControlName="apellidos_completos">
                                    <div *ngIf="formulario.get('apellidos_completos')?.invalid && formulario.get('apellidos_completos')?.touched"
                                        class="invalid-feedback d-block">
                                        Este campo es obligatorio
                                    </div>
                                </div>

                                <div class="col-xl-6 col-lg-12">
                                    <label class="form-label">Estado</label>
                                    <br>
                                    <label class="switch">
                                        <input class="toggle" type="checkbox" formControlName="estado"
                                            [checked]="!bloqueado" (change)="bloqueado ? desbloquear() : bloquear() " />
                                        <span class="switch-state"></span>
                                        <br>
                                        &nbsp;&nbsp;
                                        <label>{{!bloqueado ? 'Activo' : 'Bloqueado'}}</label>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Sección de contacto -->
                    <div class="col-md-6">
                        <div class="form-section shadow">
                            <h5 class="section-title">Información de Contacto</h5>
                            <div class="row g-3">

                                <!-- Teléfono -->
                                <div class="col-md-12">
                                    <label class="form-label">Número de Celular</label>
                                    <div class="row gx-2 align-items-start">
                                        <!-- Indicativo -->
                                        <div class="col-md-4 col-5">
                                            <select formControlName="indicativo_celular_comprador"
                                                class="form-select w-100">
                                                <option value="" disabled selected>Cod. País</option>
                                                <option *ngFor="let item of indicativos" [value]="item.phone_code">
                                                    {{item.nombre}} (+{{item.phone_code}})
                                                </option>
                                            </select>
                                            <div *ngIf="formulario.get('indicativo_celular_comprador')?.invalid && formulario.get('indicativo_celular_comprador')?.touched"
                                                class="invalid-feedback d-block">
                                                Este campo es obligatorio
                                            </div>
                                        </div>

                                        <!-- Número -->
                                        <div class="col-md-8 col-7">
                                            <input class="form-control w-100" type="number"
                                                (input)="validarSoloNumeros($event)"
                                                formControlName="numero_celular_comprador" placeholder="Número Celular">
                                            <div *ngIf="formulario.get('numero_celular_comprador')?.invalid && formulario.get('numero_celular_comprador')?.touched"
                                                class="invalid-feedback d-block">
                                                <span
                                                    *ngIf="formulario.get('numero_celular_comprador')?.hasError('required')">Este
                                                    campo es obligatorio</span>

                                            </div>
                                        </div>
                                    </div>

                                </div>

                                <!-- Correo -->
                                <div class="col-md-12">
                                    <label class="form-label">Correo Electrónico</label>
                                    <input class="form-control" type="email" placeholder="Correo electrónico"
                                        formControlName="correo_electronico_comprador">
                                    <div *ngIf="formulario.get('correo_electronico_comprador')?.invalid && formulario.get('correo_electronico_comprador')?.touched"
                                        class="invalid-feedback d-block">
                                        Este campo es obligatorio
                                    </div>
                                </div>

                                <!-- WhatsApp -->
                                <div class="col-md-12">
                                    <div class="form-check mb-2">
                                        <input #whatsapp type="checkbox" (change)="replicarWhatsApp($event)"
                                            class="form-check-input" id="sameWhatsapp">
                                        <label class="form-check-label" for="sameWhatsapp">Usar mismo número para
                                            WhatsApp</label>
                                    </div>

                                    <div class="col-md-12">


                                        <!-- Campos: Indicativo + Número WhatsApp -->
                                        <div class="row gx-2 align-items-start">
                                            <!-- Indicativo -->
                                            <div class="col-md-4 col-5">
                                                <select formControlName="indicativo_celular_whatsapp"
                                                    class="form-select w-100">
                                                    <option value="" disabled selected>Cod. País</option>
                                                    <option *ngFor="let item of indicativos" [value]="item.phone_code">
                                                        {{item.nombre}} (+{{item.phone_code}})
                                                    </option>
                                                </select>
                                                <div *ngIf="formulario.get('indicativo_celular_whatsapp')?.invalid && formulario.get('indicativo_celular_whatsapp')?.touched"
                                                    class="invalid-feedback d-block">
                                                    Este campo es obligatorio
                                                </div>
                                            </div>

                                            <!-- Número -->
                                            <div class="col-md-8 col-7">
                                                <input class="form-control w-100" type="number"
                                                    formControlName="numero_celular_whatsapp"
                                                    placeholder="Número WhatsApp">
                                                <div *ngIf="formulario.get('numero_celular_whatsapp')?.invalid && formulario.get('numero_celular_whatsapp')?.touched"
                                                    class="invalid-feedback d-block">
                                                    Este campo es obligatorio
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </div>

                            </div>
                        </div>
                    </div>


                </div>

                <!-- Botón de acción -->
                <div class="row mt-4">
                    <div class="col-12 text-start">
                        <button *ngIf="!encontrado" [disabled]="!formulario.valid" class="btn bc-black fc-white"
                            (click)="crearCliente()">Crear
                            Cliente</button>
                        <button *ngIf="encontrado && isEdit" [disabled]="!formulario.valid" class="btn btn-primary"
                            (click)="editarCliente()">Guardar
                            Cambios</button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <!-- Sección de resultados (cuando se encuentra un cliente) -->
    <div class="card mt-4" *ngIf="encontrado">
        <div class="card-header bg-light">
            <h5 class="mb-0">Información del Cliente</h5>
            <label *ngIf="bloqueado" class="badge bg-danger mt-2">Este usuario se encuentra bloqueado</label>
        </div>
        <div class="card-body">
            <div class="customer-info">
                <div class="row">
                    <div class="col-md-3">
                        <h6>Cliente</h6>
                        <p>{{datos.nombres_completos}}</p>
                    </div>
                    <div class="col-md-2">
                        <h6>Tipo Documento</h6>
                        <p>{{datos.tipo_documento_comprador}}</p>
                    </div>
                    <div class="col-md-2">
                        <h6>Documento</h6>
                        <p>{{datos.documento}}</p>
                    </div>
                    <div class="col-md-3">
                        <h6>Correo Electrónico</h6>
                        <p>{{datos.correo_electronico_comprador}}</p>
                    </div>
                    <div class="col-md-2">
                        <h6>Acciones</h6>
                        <div class="btn-group" role="group">
                            <button class="btn btn-sm btn-outline-primary" ngbTooltip="Pedidos Relacionados">
                                <i class="fa fa-list-alt"></i>
                            </button>
                            <button class="btn btn-sm btn-outline-primary" ngbTooltip="Nuevo Pedido">
                                <i class="fa fa-plus-square"></i>
                            </button>
                            <button class="btn btn-sm btn-outline-primary" ngbTooltip="Notas" (click)="openLg(nota)">
                                <i class="fa fa-sticky-note"></i>
                            </button>
                            <button *ngIf="!bloqueado" class="btn btn-sm btn-outline-danger" ngbTooltip="Bloquear"
                                (click)="bloquear()">
                                <i class="fa fa-lock"></i>
                            </button>
                            <button *ngIf="bloqueado" class="btn btn-sm btn-outline-success" ngbTooltip="Desbloquear"
                                (click)="desbloquear()">
                                <i class="fa fa-unlock"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Pestañas para información adicional -->
            <div class="mt-4">
                <ul class="nav nav-tabs" id="customerTabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" [class.active]="activarNotas" (click)="verNotas()">Notas</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" [class.active]="activarDatosFact"
                            (click)="verDatosFacturacion()">Facturación</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" [class.active]="activarDatosEntrega"
                            (click)="verDatosEntrega()">Entrega</button>
                    </li>
                </ul>

                <div class="tab-content p-3 border border-top-0 rounded-bottom">
                    <!-- Notas -->
                    <div *ngIf="activarNotas">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <h5>Notas del Cliente</h5>
                            <button class="btn btn-sm btn-primary" (click)="openLg(nota)">
                                <i class="fa fa-plus me-1"></i>Agregar Nota
                            </button>
                        </div>
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead class="table-light">
                                    <tr>
                                        <th>Fecha</th>
                                        <th>Nota</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let item of notas">
                                        <td style="width: 150px;">{{item.fecha}}</td>
                                        <td>{{item.nota}}</td>
                                    </tr>
                                    <tr *ngIf="!notas || notas.length === 0">
                                        <td colspan="2" class="text-center text-muted">No hay notas registradas</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Facturación -->
                    <div *ngIf="activarDatosFact">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <h5>Datos de Facturación</h5>
                            <button class="btn btn-sm btn-primary" (click)="openLg(facturacion)">
                                <i class="fa fa-plus me-1"></i>Agregar Datos
                            </button>
                        </div>
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead class="table-light">
                                    <tr>
                                        <th>Referencia</th>
                                        <th>Nombre/Razón Social</th>
                                        <th>Tipo Documento</th>
                                        <th>Documento</th>
                                        <th>Dirección</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let item of datosFacturacionElectronica; let i = index">
                                        <td>{{item.alias}}</td>
                                        <td>{{item.nombres}}</td>
                                        <td>{{item.tipoDocumento}}</td>
                                        <td>{{item.documento}}</td>
                                        <td>{{item.direccion}}</td>
                                        <td>
                                            <button class="btn btn-sm btn-outline-primary me-1"
                                                (click)="editarDatos1(facturacion,i)">
                                                <i class="fa fa-edit"></i>
                                            </button>
                                            <button class="btn btn-sm btn-outline-danger" (click)="eliminarDato(i)">
                                                <i class="fa fa-trash"></i>
                                            </button>
                                        </td>
                                    </tr>
                                    <tr
                                        *ngIf="!datosFacturacionElectronica || datosFacturacionElectronica.length === 0">
                                        <td colspan="6" class="text-center text-muted">No hay datos de facturación
                                            registrados</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Entrega -->
                    <div *ngIf="activarDatosEntrega">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <h5>Datos de Entrega</h5>
                            <button class="btn btn-sm btn-primary" (click)="openLg(entrega)">
                                <i class="fa fa-plus me-1"></i>Agregar Datos
                            </button>
                        </div>
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead class="table-light">
                                    <tr>
                                        <th>Referencia</th>
                                        <th>Nombre</th>
                                        <th>Dirección</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let item of datosEntregas;let i=index">
                                        <td>{{item.alias}}</td>
                                        <td>{{item.nombres}} {{item.apellidos}}</td>
                                        <td>{{item.direccionEntrega}}</td>
                                        <td>
                                            <button class="btn btn-sm btn-outline-primary me-1"
                                                (click)="editarDatos(entrega,i)">
                                                <i class="fa fa-edit"></i>
                                            </button>
                                            <button class="btn btn-sm btn-outline-danger" (click)="eliminarDato1(i)">
                                                <i class="fa fa-trash"></i>
                                            </button>
                                        </td>
                                    </tr>
                                    <tr *ngIf="!datosEntregas || datosEntregas.length === 0">
                                        <td colspan="4" class="text-center text-muted">No hay datos de entrega
                                            registrados</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<ng-template #entrega let-modal>
    <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title">Crear Datos de Entrega</h4>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">

        <input [(ngModel)]="entregar" type="checkbox" (change)="datosEntregass($event)">
        <label class="form-label" for="razon_social">Los datos de Entraga son iguales a los datos de
            cliente</label>
        <div class="row">
            <div class="col-sm-12">
                <label class="form-label" for="alias_entrega">Referencia Para Datos de Entrega</label>
                <input class="form-control" type="text" id="alias_entrega" [(ngModel)]="alias_entrega" />
            </div>
        </div>

        <div class="row">
            <div class="col-sm-3">
                <label class="form-label" for="nombres_entrega">Nombres:</label>
            </div>
            <div class="col-sm-3">
                <label class="form-label" for="nombres_entrega">Apellidos:</label>
            </div>

            <div class="col-sm-6">
                <label class="form-label" for="indicativo_entrega">Número de Celular:</label>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-3">

                <input class="form-control" type="text" id="nombres_entrega" [(ngModel)]="nombres_entrega" />
            </div>
            <div class="col-sm-3">

                <input class="form-control" type="text" id="apellidos_entrega" [(ngModel)]="apellidos_entrega" />
            </div>


            <div class="col-sm-3 mb-3">

                <select autocomplete="on" [(ngModel)]="indicativo_celular_entrega" class="form-control select-default"
                    id="validationCustom01" type="number" required="">
                    <option disabled selected>Indicativo Celular</option>
                    <option value="{{item.phone_code}}" *ngFor="let item of indicativos">{{item.nombre}}
                        (+{{item.phone_code}})</option>
                </select>

            </div>
            <div class="col-sm-3">
                <input class="form-control" type="text" id="numero_celular_entrega"
                    [(ngModel)]="numero_celular_entrega" />
            </div>

        </div>
        <div class="row">
            <div class="col-sm-6">
                <label class="form-label" for="otro_numero_entrega">Agregar Otro Número:</label>
            </div>

            <div class="col-sm-6">
                <label class="form-label" for="direccion_entrega">Dirección:</label>
            </div>
        </div>

        <div class="row">
            <div class="col-sm-3">
                <select autocomplete="on" [(ngModel)]="indicativo_celular_entrega2" class="form-control select-default"
                    id="validationCustom01" type="number" required="">
                    <option disabled selected>Indicativo Celular</option>
                    <option value="{{item.phone_code}}" *ngFor="let item of indicativos">{{item.nombre}}
                        (+{{item.phone_code}})</option>
                </select>
            </div>
            <div class="col-sm-3">

                <input class="form-control" type="text" id="otro_numero_entrega" [(ngModel)]="otro_numero_entrega" />
            </div>
            <div class="col-sm-6">

                <input class="form-control" type="text" id="direccion_entrega" [(ngModel)]="direccion_entrega" />
            </div>
        </div>
        <div class="row">
            <div class="col-sm-6">
                <label class="form-label" for="observaciones">Nombre de la Unidad o Edificio</label>
                <input class="form-control" type="text" id="codigo_postal_entrega" [(ngModel)]="nombreUnidad" />
            </div>
            <div class="col-sm-6">
                <label class="form-label" for="observaciones">Especificaciones Internas: Torre, Apto, Oficina</label>
                <input class="form-control" type="text" id="especificaciones_internas"
                    [(ngModel)]="especificacionesInternas" />
            </div>
        </div>

        <div class="row">
            <div class="col-sm-12">
                <label class="form-label" for="observaciones">Observaciones Adicionales / Generales para la
                    entrega:</label>
                <textarea class="form-control" id="observaciones" [(ngModel)]="observaciones"></textarea>
            </div>

        </div>
        <div class="row">
            <div class="col-sm-12">
                <label class="form-label" for="observaciones">Barrio/Sector</label>
                <input class="form-control" type="text" id="codigo_postal_entrega" [(ngModel)]="barrio" />
            </div>

        </div>
        <div class="row">

            <div class="col-sm-4 mb-3">
                <label class="form-label" class="form-label" for="validationCustom01">País</label>

                <select [(ngModel)]="pais_entrega" class="form-control select-default" name="" id=""
                    (change)="identificarDepto1()">
                    <option disabled selected>País</option>
                    <option *ngFor="let item of paises" value="{{item}}">{{item}}</option>
                </select>

            </div>

            <div class="col-md-4 mb-3">
                <label class="form-label" class="form-label" for="validationCustom01">Departamento</label>
                <select [(ngModel)]="departamento_entrega" class="form-control select-default" id="validationCustom01"
                    type="text" placeholder="Departamento" required="" (change)="identificarCiu1()">
                    <option disabled selected>Departamento</option>
                    <option *ngFor="let item of departamentos1" value="{{item}}">{{item}}
                    </option>
                </select>

            </div>

            <div class="col-md-4 mb-3">
                <label class="form-label" class="form-label" for="validationCustom01">Ciudad</label>
                <select [(ngModel)]="ciudad_municipio_entrega" class="form-control select-default"
                    id="validationCustom01" type="text" placeholder="Ciudad" required="" (change)="idBillingZone('')">
                    <option disabled selected>Ciudad / Municipio</option>
                    <option *ngFor="let item of ciudades1" value="{{item}}">{{item}}</option>
                </select>
            </div>


        </div>
        <div class="row">
            <div class="col-sm-4">
                <label class="form-label" class="form-label" for="validationCustom01">Zona Cobro</label>
            </div>
            <div class="col-sm-4">
                <label class="form-label" for="codigo_postal_entrega">Código Postal:</label>
            </div>

        </div>
        <div class="row">
            <div class="col-md-4 mb-3">

                <select class="form-control select-default" [(ngModel)]="zona_cobro" id="validationCustom01" type="text"
                    placeholder="Zona Cobro" required="" (change)="idBillingZone($event)">
                    <option disabled selected>
                        Zona Cobro
                    </option>
                    <option *ngFor="let item of filteredResults" value="{{ item.nombreZonaCobro }}">
                        {{ item.nombreZonaCobro }}
                    </option>
                </select>
            </div>
            <div class="col-md-4">

                <input class="form-control" type="text" id="codigo_postal_entrega"
                    [(ngModel)]="codigo_postal_entrega" />
            </div>
            <div class="col-md-4 mb-3">
                <button class="btn btn-primary" (click)="redirectToPostalCode()">
                    Conoce Tu Codigo Postal
                </button>
            </div>
        </div>



    </div>
    <div class="modal-footer">
        <button *ngIf="!editandodato" type="button" class="btn btn-outline-dark" (click)="guardarDatosEntrega()">
            Guardar
        </button>
        <button *ngIf="editandodato" type="button" class="btn btn-outline-dark" (click)="editarDatosEntrega()">
            Guardar
        </button>
    </div>
</ng-template>
<ng-template #facturacion let-modal>
    <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title">Crear Datos Facturacion Electrónica </h4>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">

        <input [(ngModel)]="facturacionElectronica" type="checkbox" (change)="datosFacElect($event)">
        <label class="form-label" for="razon_social">Los datos de facturacion electronica son iguales a los del
            cliente</label>

        <div class="row">
            <div class="col-sm-6">
                <label class="form-label" for="razon_social">Referencia para guardar datos:</label>
                <input placeholder="Ej: Factura para compras de la empresa" class="form-control" type="text"
                    id="razon_social" [(ngModel)]="alias_facturacion" />
            </div>
            <div class="col-sm-6">
                <label class="form-label" for="razon_social">Razón Social / Nombre Completo:</label>
                <input class="form-control" type="text" id="razon_social" [(ngModel)]="razon_social" />
            </div>
            <div class="col-sm-6">
                <label class="form-label" for="tipo_documento_facturacion">Tipo de Documento:</label>
                <select class="form-control" id="tipo_documento_facturacion" [(ngModel)]="tipo_documento_facturacion">
                    <option value="CC-NIT">Cedula de Ciudadania</option>
                    <option value="PA">PA</option>
                    <option value="TI">TI</option>
                    <option value="NIT">NIT</option>
                </select>
            </div>
            <div class="col-sm-6">
                <label class="form-label" for="tipo_documento_facturacion">Documento:</label>
                <input class="form-control" type="text" id="numero_documento_facturacion"
                    [(ngModel)]="numero_documento_facturacion" />
            </div>
        </div>
        <div class="row">
            <div class="col-sm-6">
                <label class="form-label" for="indicativo">Número de Celular:</label>
            </div>
            <div class="col-sm-6">
                <label class="form-label" for="correo_electronico">Correo Electrónico:</label>
            </div>
        </div>
        <div class="row">

            <div class="col-sm-3 mb-3">

                <select autocomplete="on" [(ngModel)]="indicativo_celular_facturacion"
                    class="form-control select-default" id="validationCustom01" type="number" required="">
                    <option disabled selected>Indicativo Celular</option>
                    <option value="{{item.phone_code}}" *ngFor="let item of indicativos">{{item.nombre}}
                        (+{{item.phone_code}})</option>
                </select>

            </div>
            <div class="col-sm-3">


                <input class="form-control" type="text" id="numero_celular" [(ngModel)]="numero_celular_facturacion" />
            </div>

            <div class="col-sm-6">

                <input class="form-control" type="email" id="correo_electronico"
                    [(ngModel)]="correo_electronico_facturacion" />
            </div>

        </div>
        <div class="row">
            <div class="col-sm-12">
                <label class="form-label" for="direccion">Dirección del Comprador:</label>
                <input class="form-control" type="text" id="direccion" [(ngModel)]="direccion_facturacion" />
            </div>
            <div class="col-sm-4 mb-3">
                <label class="form-label" class="form-label" for="validationCustom01">País</label>

                <select [(ngModel)]="pais" class="form-control select-default" name="" id=""
                    (change)="identificarDepto()">
                    <option disabled selected>País</option>
                    <option *ngFor="let item of paises" value="{{item}}">{{item}}</option>
                </select>

            </div>
            <div class="col-md-4 mb-3">
                <label class="form-label" class="form-label" for="validationCustom01">Departamento</label>
                <select [(ngModel)]="departamento" class="form-control select-default" id="validationCustom01"
                    type="text" placeholder="Departamento" required="" (change)="identificarCiu()">
                    <option disabled selected>Departamento</option>
                    <option *ngFor="let item of departamentos" value="{{item}}">{{item}}
                    </option>
                </select>

            </div>
            <div class="col-md-4 mb-3">
                <label class="form-label" class="form-label" for="validationCustom01">Ciudad</label>
                <select [(ngModel)]="ciudad_municipio" class="form-control select-default" id="validationCustom01"
                    type="text" placeholder="Ciudad" required="">
                    <option disabled selected>Ciudad / Municipio</option>
                    <option *ngFor="let item of ciudades" value="{{item}}">{{item}}</option>
                </select>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-4">
                <label class="form-label" for="codigo_postal">Código Postal:</label>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-4">

                <input class="form-control" type="text" id="codigo_postal" [(ngModel)]="codigo_postal" />
            </div>
            <div class="col-md-4 mb-3">
                <button class="btn btn-primary" (click)="redirectToPostalCode()">Conoce Tu Codigo Postal</button>
            </div>
        </div>


    </div>
    <div class="modal-footer">
        <button type="button" *ngIf="!editandodato" class="btn btn-outline-dark"
            (click)="guardarDatosFacturacionElectronica()">
            Guardar
        </button>
        <button type="button" *ngIf="editandodato" class="btn btn-outline-dark" (click)="editarDatosFacturacion()">
            Guardar
        </button>
    </div>
</ng-template>
<ng-template #nota let-modal>
    <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title">Crear Nota </h4>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form class="custom-datepicker custom-datepicker-dropdown">
            <div class="row">
                <div class="col-md-3">
                    <label for="date">Fecha:</label>
                    <div id="date" class="input-group">
                        <p>{{ dateactual }}</p>
                    </div>
                </div>
                <div class="col-md-9">
                    <label for="note">Nota:</label>
                    <div id="note" class="input-group">
                        <textarea [(ngModel)]="notaNueva" class="form-control" rows="3" placeholder="Notas"></textarea>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-outline-dark" (click)="guardarNota()">
            Guardar
        </button>
    </div>
</ng-template>